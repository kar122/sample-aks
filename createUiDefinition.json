{
	"$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#",
	"handler": "Microsoft.Azure.CreateUIDef",
	"version": "0.1.2-preview",
	"parameters": {
		"basics": [{
				"name": "location",
				"type": "Microsoft.Common.Location",
				"label": "AKS Cluster Location",
				"defaultValue": "eastus",
				"toolTip": "The location where the AKS cluster will be deployed.",
				"constraints": {
					"allowedLocations": [
						"eastus",
						"westcentralus",
						"westeurope"
					]
				}
			},
			{
				"name": "clusterResourceName",
				"type": "Microsoft.Common.TextBox",
				"label": "AKS Cluster Name",
				"toolTip": "The name of the Managed Cluster resource.",
				"defaultValue": "",
				"constraints": {
					"required": true,
					"regex": "^[a-zA-Z0-9-]*$",
					"validationMessage": "The AKS cluster name must only contain alphanumeric characters and hyphens."
				}
			},
			{
				"name": "kubernetesVersion",
				"type": "Microsoft.Common.DropDown",
				"label": "Kubernetes Version",
				"toolTip": "The version of Kubernetes.",
				"defaultValue": "1.21.2",
				"constraints": {
					"allowedValues": [{
							"label": "1.21.2",
							"value": "1.21.2"
						},
						{
							"label": "1.20.7",
							"value": "1.20.7"
						},
						{
							"label": "1.19.11",
							"value": "1.19.11"
						}
					],
					"required": true
				}
			}
		],
		"steps": [{
			"name": "agentPool",
			"label": "Agent Pool Settings",
			"subLabel": {
				"preValidation": "Configure the agent pool",
				"postValidation": "Done"
			},
			"bladeTitle": "Agent Pool Configuration",
			"elements": [{
					"name": "vmSize",
					"type": "Microsoft.Common.DropDown",
					"label": "VM Size",
					"defaultValue": "Standard_D2s_v3",
					"toolTip": "The size of the VMs for the agent pool.",
					"constraints": {
						"allowedValues": [{
								"label": "Standard_D2s_v3",
								"value": "Standard_D2s_v3"
							},
							{
								"label": "Standard_D4s_v3",
								"value": "Standard_D4s_v3"
							},
							{
								"label": "Standard_D8s_v3",
								"value": "Standard_D8s_v3"
							}
						],
						"required": true
					}
				},
				{
					"name": "nodeCount",
					"type": "Microsoft.Common.Slider",
					"min": 1,
					"max": 10,
					"label": "Node Count",
					"defaultValue": 3,
					"showStepMarkers": false,
					"toolTip": "The number of nodes in the agent pool."
				}
			]
		}],
		"outputs": {
			"location": "[basics('location')]",
			"clusterResourceName": "[basics('clusterResourceName')]",
			"kubernetesVersion": "[basics('kubernetesVersion')]",
			"vmSize": "[steps('agentPool').vmSize]",
			"nodeCount": "[steps('agentPool').nodeCount]"
		}
	}
}